
Reminders
=========

-- App --

[ ] Add reminder in group toolbar
[ ] Add / Remove reminders in group overflow menu

[ ] Add a reminder
    1 [ Hour / Day / Week / Month ] [ Before / After ] event [ Starts / Ends ]
    At 5:30am (not available for Hour)
    Repeats every
    until event [ Starts / Ends ]

[?] Reminders have their own groups

[ ] View reminders screen
    [ ] Delete, edit, add

[ ] Edit Reminder modal
    [ ] Date and time
        [ ] Set starting date and time
    [ ] Repeat? "Repeats every hour" "Repeats every day at 5:37pm" "Repeats every day in March at 5:37pm"
        [ ] Only at these Hours
            [ ] At midnight, 1, 2, 3, 4, 5 (preselected from start time), 6, 7, 8, 9, 10, 11, noon, ...
        [ ] Only on these Days
            [ ] on M, T, W, T (preselected from start day), F, S, S
            [ ] on the 15th
            [ ] on the 2nd Tuesday
        [ ] Only in these Months (not selected)
            [ ] in March, April, June, ...

-- Spec --

{
    reminders: [
        {
            position: 'start'|'end',
            offset: {
                amount: -1,
                unit: 'day'
            },
            time: {
                hour: 23,
                minute: 30
            },
            repeat: null || {
                until: 'start'|'end',
                hours: null || [1, ..., 5, ..., 23],
                days: null || [ 'monday', '1st', ..., '15th', ..., 'last_of_month' ],
                weeks: null || [ 'first', 'second', ..., 'last' ],
                months: null || [ 'january', ..., 'december' ]
            },
            actual: {
                startsAt: <timestamp>,
                endsAt: <timestamp>
            }
        },
        // ...
    ]
}

-- App --

Add default reminder 1hr before event

POST /event
{
    // ...
    reminders: [
        {
            position: 'start',
            offset: {
                amount: -1,
                unit: 'hour'
            },
            time: {
                hour: 4,
                minute: 0
            },
            repeat: null
        }
    ]
}

-- AQL --

regular startsAt as is, but change to 1 per reminder (not event.startsAt, will become event.reminders[].actual.startsAt)

add call to handle repeating events, one check per minute on the :00 second...

getEventRemindersFor(
    currentMinute: Int,
    currentHour: Int,
    currentDayOfWeek: String,
    currentDayOfMonth: Int,
    isLastDayOfMonth: Boolean,
    currentWeekOfMonth: String,
    currentMonth: String,
): List<Event> {

}

FOR event IN @@entities FILTER event.kind == 'event'
        AND event.cancelled == false
        AND event.reminders != NULL
    FOR reminder IN event.reminders FILTER _________
            AND reminder.time.minute == @currentMinute
            AND reminder.actual.startsAt >= DATE_NOW() AND reminder.actual.endsAt < DATE_NOW()
            AND (repeat.hours == NULL OR @currentHour IN repeat.hours)
            AND (repeat.days == NULL OR @currentDayOfWeek IN repeat.days OR @currentDayOfMonth IN repeat.days OR (@isLastDayOfMonth AND 'last_of_month' IN repeat.days))
            AND (repeat.weeks == NULL OR @currentWeekOfMonth IN repeat.weeks OR @isLastWeekOfMonth AND 'last' IN repeat.weeks)
            AND (repeat.months == NULL OR @currentMonth IN repeat.months)

-- Server --

[?] Reminder post in group
    [ ] Alarm icon with message below it + who set the alarm

[ ] Status messages on add, edit, remove
    [ ] Jacob added a reminder "Do this and that"
    [ ] Jacob edited a reminder
    [ ] Jacob removed a reminder "Do this and that"

Incoming
========

[.] Reminders
[ ] Categories

[ ] NPCs

[ ] Kiosk mode
    [ ] Return to tab after 1 minute
    [ ] Expand feed | Show map
    [ ] Auto refresh tabs every 1 min

[X] Search for stuff should hide the feed
[ ] Hide contacts via long press / delete endpoint?

[ ] thought: react to people's goals
[ ] thought: find a new interest
[ ] thought: Ideas tab
[ ] thought: name it Let's get closer

[ ] guide: assistant, angel, guide, life guide
[ ] guide: idea button
[ ] guide: remove welcome tab, add your guide
[ ] guide: add Xable messages to top of feed tabs
[ ] guide: guides by people, Outdoor Adventure by Jacob

Invite to join, Private Community & Social Activities

❤ NPCs ❤
========

Uses webhooks and regular API calls
NPC gets regular notifications that a user would
NPC flag on visible profile
Edit + setup happens inside NPC
Need Message w/ Option Buttons message attachment

Invite to group
Leave group

First NPC: Reminder Rochelle
post a message or ask a question every week / day / year / etc.
    she can handle multiple reminders



❤ Next ❤
========
